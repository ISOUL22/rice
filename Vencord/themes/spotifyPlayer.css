/**
 * @name Improved Spotify Player
 * @description A visual overhaul of the Vencord Spotify Player plugin.
 * @author Soul
 * @version who fucking knows lol
 * @website 
 * @source 
*/

/*---===< COVER ART AS BACKGROUND >===---*/
#vc-spotify-player {
    border: none;
    overflow: hidden;
    border-radius: 15px;
    transition: all 0.4s ease-out;
    background: var(--bg-overlay-floating, var(--background-base-low, var(--background-secondary-alt)));
  
    /* layer all children above background */
    >* {
      position: relative;
      z-index: 1;
    }
  }
  
  /* album cover as background using pseudo-elements */
  #vc-spotify-player::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--vc-spotify-track-image);
    background-position: center;
    background-size: cover;
    background-repeat: no-repeat;
    filter: blur(2px) brightness(0.6);
    /* subtle blur + darken for text readability */
    border-radius: inherit;
    z-index: 0;
    transition: filter 0.3s ease;
  }
  
  /* fade towards bottom */
  #vc-spotify-player::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, transparent 0%, #1e1e2ecc 100%);
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;
  }
  
  /* hide the original album image */
  #vc-spotify-info-wrapper>img,
  #vc-spotify-player:not(:has(#vc-spotify-album-expanded-wrapper)):hover #vc-spotify-album-image {
    display: none;
  }
  
  /*---===< ICONS >===---*/
  #vc-spotify-song-title::before,
  #vc-spotify-song-title+div::before,
  #vc-spotify-song-title+div+div::before {
    -webkit-mask-size: contain;
    padding: 7px;
    margin-left: -17px;
    content: '';
    background-color: var(--header-primary);
    position: absolute;
  }
  
  #vc-spotify-song-title+div::before,
  #vc-spotify-song-title+div+div::before {
    background-color: var(--header-secondary);
  }
  
  #vc-spotify-song-title::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%' height='100%' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-music-4'%3E%3Cpath d='M9 18V5l12-2v13'%3E%3C/path%3E%3Cpath d='m9 9 12-2'%3E%3C/path%3E%3Ccircle cx='6' cy='18' r='3'%3E%3C/circle%3E%3Ccircle cx='18' cy='16' r='3'%3E%3C/circle%3E%3C/svg%3E");
  }
  
  #vc-spotify-song-title+div::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-mic'%3E%3Cpath d='M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z'%3E%3C/path%3E%3Cpath d='M19 10v2a7 7 0 0 1-14 0v-2'%3E%3C/path%3E%3Cline x1='12' x2='12' y1='19' y2='22'%3E%3C/line%3E%3C/svg%3E");
  }
  
  #vc-spotify-song-title+div+div::before {
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-disc-2'%3E%3Ccircle cx='12' cy='12' r='4'%3E%3C/circle%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='12' x2='12' y2='12.01'%3E%3C/line%3E%3C/svg%3E");
  }
  
  
  /* the song info */
  #vc-spotify-player #vc-spotify-titles {
    margin-left: 16px;
  }
  
  #vc-spotify-song-title::before,
  #vc-spotify-song-title+div::before,
  #vc-spotify-song-title+div+div::before {
    background-color: var(--brand-500);
  }
  
  /*---===< PROGRESS BAR >===---*/
  #vc-spotify-progress-bar>[class^="slider_"]>[class^="bar_"]>[class^="barFill_"] {
    background-color: white !important;
    background: var(--vc-spotify-track-image);
    background-size: 2px 100%;
    filter: blur(2px) brightness(100%);
  }
  
  #vc-spotify-player .a562c840daab72a7-bar {
    background-color: hsl(var(--white-500-hsl) / 0.1);
  }
  
  #vc-spotify-progress-bar {
    margin: 0 0 -15px;
  }
  
  /* hide durations */
  .vc-spotify-progress-time {
    display: none;
  }
  
  /*---===< BUTTONS >===---*/
  .vc-spotify-button-row {
    margin-bottom: -10px;
  }
  
  .vc-spotify-button-row button:last-child {
    margin-right: 0;
  }
  
  .vc-spotify-button-row button:hover {
    background-color: var(--bg-1);
  }
  
  .vc-spotify-button-row {
    .vc-spotify-button {
      width: 50px;
      border: 1px solid var(--border-faint);
      background-color: var(--button-secondary-background);
      color: var(--text-3);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
  
      svg {
        width: 60%;
        height: 60%;
        display: block;
        transform: scale(1.3);
      }
  
      &[class*=shuffle] {
        path {
          d: path("m 12.5 14.723 l 0.98 -1.167 l 0.957 1.14 a 2.25 2.25 0 0 0 1.724 0.804 h 1.947 l -1.017 -1.018 a 0.75 0.75 0 1 1 1.06 -1.06 l 2.829 2.828 l -2.829 2.828 a 0.75 0.75 0 1 1 -1.06 -1.06 L 18.109 17 H 16.16 A 3.75 3.75 0 0 1 13.287 15.66 L 12.5 14.722 Z m 5.651 -9.801 a 0.75 0.75 0 1 0 -1.06 1.06 L 18.109 7 H 16.16 A 3.75 3.75 0 0 0 13.287 8.34 L 7.114 15.696 A 2.25 2.25 0 0 1 5.39 16.5 H 5 V 18 H 5.391 A 3.75 3.75 0 0 0 8.264 16.66 L 14.437 9.304 A 2.25 2.25 0 0 1 16.161 8.5 h 1.947 l -1.017 1.018 a 0.75 0.75 0 0 0 1.06 1.06 L 20.98 7.75 L 18.15 4.922 Z M 5.391 7.5 H 5 V 6 H 5.391 C 6.5 6 7.551 6.49 8.264 7.34 L 9.89 9.277 L 8.911 10.444 L 7.115 8.304 A 2.25 2.25 0 0 0 5.39 7.5 Z");
        }
  
        &:not([class*=off]) {
          color: var(--vc-spotify-green);
        }
      }
  
      &[class*=repeat] {
        .vc-spotify-repeat-1 {
          margin-top: -9px;
          font-size: 50%;
        }
  
        path {
          d: path("M 5 9.75 A 3.75 3.75 0 0 1 8.75 6 h 8.5 A 3.75 3.75 0 0 1 21 9.75 v 5 a 3.75 3.75 0 0 1 -3.75 3.75 H 14.81 l 1.018 1.018 a 0.75 0.75 0 1 1 -1.06 1.06 L 11.939 17.75 l 2.829 -2.828 a 0.75 0.75 0 1 1 1.06 1.06 L 14.811 17 h 2.439 a 2.25 2.25 0 0 0 2.25 -2.25 v -5 a 2.25 2.25 0 0 0 -2.25 -2.25 h -8.5 A 2.25 2.25 0 0 0 6.5 9.75 v 5 A 2.25 2.25 0 0 0 8.75 17 H 10 v 1.5 H 8.75 A 3.75 3.75 0 0 1 5 14.75 v -5 z");
        }
  
        &:not([class*=off]) {
          color: var(--vc-spotify-green);
        }
      }
    }
  }
  